import express from 'npm:express@4.18.2';
import { load } from 'https://deno.land/std/dotenv/mod.ts';
import memberRoutes from './routes/members.js';

const env = await load();
const app = express();

app.use(express.json());
app.use(express.static('frontend'));

// Routes
app.use('/api', memberRoutes);

app.get('/', (_req, res) => {
  res.json({ 
    message: 'API Gia Pháº£ Ä‘ang hoáº¡t Ä‘á»™ng',
    version: '1.0.0',
    endpoints: {
      members: '/api/members',
      tree: '/api/tree',
      frontend: '/index.html'
    }
  });
});

const port = env.PORT || Deno.env.get('PORT') || 3000;
app.listen(port, () => {
  console.log(`ğŸš€ Server running on port ${port}`);
  console.log(`ğŸ“ Local: http://localhost:${port}`);
  console.log(`ğŸŒ API: http://localhost:${port}/api/tree`);
});